<html>
  <title>Chaos Games</title>
  <head>
    <link rel="stylesheet" href="css/post.css" />
  </head>
  <body>

    <h2>Chaos Games</h2>
    <h3>Drawing fractals one random point at a time</h3>

    <div>
      <p>
        A chaos game is a simple iterative process. Given a shape and
        a ratio, choose an initial position. Now, pick a random vertex
        from this shape. The next position is found by drawing a
        vector from from the current position to the randomly chosen
        vertex and scaling that vector by the ratio. Recurse.
        Plotting the points generated by this process will reveal a
        fractal for some - not all - shapes and ratios.
      </p>

      <p>
        We can specify this concisely using a recurrence relation.
        Let <code>v[n]</code> represent the output of a random process
        where the <code>n</code>th value is a random vertex from our
        shape (assume vertices and points are represented by vectors
        obeying normal vector math).  Then:
      </p>
      <p>
        <code>
          p[0] = p<sub>0</sub> <br />
          p[n+1] = p[n] + r*(v[n] - p[n])
        </code>
      </p>

      <p>
        Let's get to the good stuff with a classic example: the
        Sierpi≈Ñski triangle. This is obtained by choosing a triangle
        as our shape and a ratio of <code>1/2</code>. Click the render
        button to check it out. <i>This may take a while if you're on
          a mobile or low-power device</i>.
      </p>

      <div class="chaos-controller-wrapper">
      <div class="chaos-example chaos-container chaos-controller">
        <div style="text-align: left"><button class="chaos-button">Render</button></div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" version="1.1"
               width="500" height="500">
            <rect width="100%" height="100%" fill="white" />
            <g transform="translate(250, 250), scale(1, -1)">
            </g>
          </svg>
        </div>
      </div>
      </div>

      <p>
        You can play around with drawing more fractals
        in <a href="chaos.html">the sandbox</a>.
      </p>
      
      <p>
        The main purpose of this project was to acquaint myself with
        Clojure's <a href="http://github.com/clojure/core.async">new
        async library</a>. To that degree, the project was a success.
        I had a lot of fun playing around with coroutines in my
        browser. There's something special about having a browser as
        part of your REPL environment. There are some definite pain
        points though most can be eased by rigorous state management.
        The biggest problem with my particular development environment
        is that I have no easy way of resetting the entire page - not
        too hard to address for next time.
      </p>
      
      <script type="text/javascript" src="js/chaos.js"></script>
      <script type="text/javascript">
        chaos.boot.attach_example.call(null, document.getElementsByClassName("chaos-example").item(0));
      </script>
  </body>
</html>
